---
template: post
slug: 05-best-time-to-buy-and-sell-stock-ii
draft: false
socialImage: /emoji.png
title: '[LeetCode] 30 Day LeetCoding Challenge - Day 05. Best Time to Buy and Sell Stock II'
date: 2020-05-04T16:43:17.424Z
description: LeetCode 30ì¼ ì±Œë¦°ì§€, Day 05. Best Time to Buy and Sell Stock II ë¬¸ì œ í’€ì´ì…ë‹ˆë‹¤.
category: Problem Solving
tags:
  - Problem Solving
  - LeetCode
  - 30 Day Challenge
  - íƒìš•ë²• (Greedy)
---

\
ì•ˆë…•í•˜ì„¸ìš”. **Mochalatte** ì…ë‹ˆë‹¤.

ì´ë²ˆì— LeetCodeì—ì„œ [30 Day LeetCoding Challenge](https://leetcode.com/explore/featured/card/30-day-leetcoding-challenge/)ë¥¼ ì§„í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.\
4ì›” í•œ ë‹¬ ë™ì•ˆ(`2020.4.1 ~ 30`) ë§¤ì¼ í•œ ë¬¸ì œì”© ì¶œì œë˜ê³ , í•œêµ­ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ë§¤ì¼ ì˜¤í›„ 4ì‹œì— ë¬¸ì œê°€ ì˜¬ë¼ì˜µë‹ˆë‹¤.\
í•œ ë‹¬ ë™ì•ˆ ì±Œë¦°ì§€ ë¬¸ì œë¥¼ í’€ë©´ì„œ ê° ë¬¸ì œì— ëŒ€í•œ í’€ì´ì™€ í’€ë©´ì„œ í•„ìš”í•œ íŒì„ ê³µìœ í•´ë³´ê³ ì í•©ë‹ˆë‹¤.

---

## Day 05. Best Time to Buy and Sell Stock II [ğŸ”—](https://leetcode.com/explore/featured/card/30-day-leetcoding-challenge/528/week-1/3287/)

Say you have an array `prices` for which the $i^{th}$ element is the price of a given stock on day $i$.

Design an algorithm to find the maximum profit. You may complete as many transactions as you like (i.e., buy one and sell one share of the stock multiple times).

**Note:** You may not engage in multiple transactions at the same time (i.e., you must sell the stock before you buy again).

**Example 1:**

```bash
Input: [7, 1, 5, 3, 6, 4]
Output: 7
Explanation: Buy on day 2 (price = 1) and sell on day 3 (price = 5), profix = 5-1 = 4.
             Then buy on day 4 (price = 3) and sell on day 5 (price = 6), profit = 6-3 = 3.
```

**Example 2:**

```bash
Input: [1, 2, 3, 4, 5]
Output: 4
Explanation: Buy on day 1 (price = 1) and sell on day 5 (price = 5), profit = 5-1 = 4.
             Note that you cannot buy on day 1, buy on day 2 and sell them later, as you are
             engaging multiple transactions at the same time. You must sell before buying again.
```

**Example 3:**

```bash
Input: [7, 6, 4, 3, 1]
Output: 0
Explanation: In this case, no transaction is done, i.e. max profit = 0.
```

\
**Constraints:**

- $1 \le prices.length \le 3 \times 10^4$
- $0 \le prices[i] \le 10^4$

---

ì´ ë¬¸ì œëŠ” ì´ $N$ì¼ì˜ ì£¼ì‹ ê°€ê²© ì •ë³´ê°€ ì£¼ì–´ì§ˆ ë•Œ, **ê°€ì¥ í° ì´ìµ**ì€ ì–¼ë§ˆì¸ì§€ ì•Œì•„ë‚´ì•¼ í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. ì´ë•Œ, ì£¼ì‹ì„ ì‚¬ê³  íŒŒëŠ” ê²ƒì€ ë§ˆìŒê» í•  ìˆ˜ ìˆì§€ë§Œ ê°€ì§€ê³  ìˆì„ ìˆ˜ ìˆëŠ” ì£¼ì‹ì€ **ìµœëŒ€ í•˜ë‚˜**ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì£¼ì‹ì„ ì‚¬ë ¤ë©´ ì´ì „ì— ê°€ì§€ê³  ìˆë˜ ì£¼ì‹ì„ íŒ”ì•„ì•¼ í•©ë‹ˆë‹¤. ì´ ë¬¸ì œì—ì„œ ê°€ì¥ ê¸°ë³¸ì ì¸ ê²ƒì€ ì´ìµì´ ë°œìƒí•˜ë ¤ë©´ íŒ” ë•Œì˜ ì£¼ì‹ ê°€ê²©ì´ ì‚´ ë•Œì˜ ì£¼ì‹ ê°€ê²©ë³´ë‹¤ ë¹„ì‹¸ì•¼ í•œë‹¤ëŠ” ê²ƒì´ì£ . ì´ëŸ¬í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ë¬¸ì œë¥¼ ë‹¨ìˆœí•œ ë°©ë²•ë¶€í„° ì‹œì‘í•´ì„œ í’€ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

---

### ì²« ë²ˆì§¸ ì ‘ê·¼ : ì™„ì „ íƒìƒ‰ (Brute Force)

ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ê°€ì¥ í™•ì‹¤í•œ ê²ƒì€ ëª¨ë“  ê²½ìš°ë¥¼ í™•ì¸í•˜ê³  ê·¸ ì¤‘ ê°€ì¥ í° ê°’ì„ ì·¨í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì €í¬ê°€ ìƒê°í•´ë³¼ ìˆ˜ ìˆëŠ” ë°©ë²•ì€ `ì™„ì „ íƒìƒ‰ (Brute Force)`ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ `xì¼`ë¶€í„° ì‹œì‘í•´ì„œ ë§ˆì§€ë§‰ ë‚ ê¹Œì§€ ì§„í–‰í–ˆì„ ë•Œ, ì–»ì„ ìˆ˜ ìˆëŠ” ìµœëŒ€ ì´ìµì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ `calculateProfit`ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ `xì¼`ì„ í¬í•¨í•˜ì—¬ ê·¸ ì´í›„ì— ì´ìµì´ ë°œìƒí•˜ëŠ” í•œ ìŒì„ ë°œê²¬í•˜ë©´ `(í•´ë‹¹ ì´ìµ) + (ê·¸ ì´í›„ì˜ ìµœëŒ€ ì´ìµ)`ìœ¼ë¡œ ì´ìµì„ ê³„ì‚°í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´, $x \le a \le b$ì¼ ë•Œ, `xì¼` ì´í›„ `aì¼`ì— ì‚¬ê³ , `bì¼`ì— íŒ” ë•Œ ì´ìµì´ ë°œìƒí•œë‹¤ê³  í•˜ë©´, ì´ìµì€ `(bì¼ ê°€ê²© - aì¼ ê°€ê²©) + calculateProfit(prices, bì¼)`ë¡œ ê³„ì‚°ì´ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ë ‡ê²Œ ì–»ì–´ì§€ëŠ” ëª¨ë“  ì´ìµì„ ë¹„êµí•˜ì—¬ **ìµœëŒ€ ì´ìµ**ì„ ì–»ì–´ë‚´ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì²« ë²ˆì§¸ ì ‘ê·¼ì— ëŒ€í•œ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```cpp
class Solution {
public:
    int maxProfit(vector<int>& prices) {
        return calculateProfit(prices, 0);
    }

    int calculateProfit(vector<int>& prices, int pos) {
        if (pos >= prices.size()) return 0;
        int max_profit = 0;
        for (int lo = pos; lo < prices.size(); ++lo) {
            int max_value = 0;
            for (int hi = lo + 1; hi < prices.size(); ++hi) {
                if (prices[lo] < prices[hi]) {
                    int cur_profit = calculateProfit(prices, hi) + prices[hi] - prices[lo];
                    max_value = max(max_value, cur_profit);
                }
            }
            max_profit = max(max_profit, max_value);
        }
        return max_profit;
    }
};
```

ì´ ì½”ë“œì˜ **ì‹œê°„ ë³µì¡ë„ëŠ” $O(N^N)$**ì´ê³ , **ê³µê°„ ë³µì¡ë„ëŠ” $O(N)$**ì…ë‹ˆë‹¤. ì‹œê°„ ë³µì¡ë„ê°€ $O(N^N)$ì¸ ì´ìœ ëŠ” ì¬ê·€í•¨ìˆ˜ ì•ˆì— ìˆëŠ” ë¡œì§ì€ $O(N^2)$, ìµœì•…ì˜ ê²½ìš° ì¬ê·€ì ìœ¼ë¡œ í˜¸ì¶œë˜ëŠ” ê¹Šì´ê°€ $N$ì´ë¯€ë¡œ ì‹œê°„ ë³µì¡ë„ê°€ $O(N^{2N})$ê°€ ë˜ê³ , ì‹œê°„ ë³µì¡ë„ í‘œê¸°ì—ì„œ ìƒìˆ˜ëŠ” ìƒëµí•˜ë¯€ë¡œ ê²°ê³¼ì ìœ¼ë¡œ $O(N^N)$ì´ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê³µê°„ ë³µì¡ë„ê°€ $O(N)$ì¸ ì´ìœ ëŠ” ì¶”ê°€ ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì§€ëŠ” ì•Šì•˜ì§€ë§Œ ì¬ê·€í˜¸ì¶œì„ í•˜ê²Œ ë˜ë©´ ì‹œìŠ¤í…œ ìŠ¤íƒì— í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì£¼ì†Œê°€ ê³„ì† ìŒ“ì´ê²Œ ë˜ëŠ”ë° ìµœì•…ì˜ ê²½ìš° $N$ë²ˆ í˜¸ì¶œí•˜ê²Œ ë˜ë¯€ë¡œ $O(N)$ì´ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

---

### ë‘ ë²ˆì§¸ ì ‘ê·¼ : ë‹¤ì´ë‚˜ë¯¹ í”„ë¡œê·¸ë˜ë° (Dynamic Programming; DP)

ì²« ë²ˆì§¸ ì ‘ê·¼ì—ì„œ ì™„ì „ íƒìƒ‰ì„ ì§„í–‰í•˜ë‹¤ ë³´ë©´ êµ¬í–ˆë˜ ê°’ì„ **ì¤‘ë³µ**ìœ¼ë¡œ êµ¬í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§¤ìš° ë§ì´ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ë ‡ê²Œ ì¤‘ë³µìœ¼ë¡œ êµ¬í•˜ê²Œ ë˜ëŠ” ë¶€ë¶„ì€ ê¸°ì–µí•˜ê³  ìˆë‹¤ê°€ ì¬í™œìš©í•˜ë©´ ë¶ˆí•„ìš”í•œ ì¶”ê°€ ì—°ì‚°ì„ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, **`ë‹¤ì´ë‚˜ë¯¹ í”„ë¡œê·¸ë˜ë° (Dynamic Programming; DP)`** ë°©ë²•ì„ ì´ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‹¤ì´ë‚˜ë¯¹ í”„ë¡œê·¸ë˜ë°ì€ ì í™”ì‹ë§Œ ì˜ ì„¸ìš°ë©´ ë©ë‹ˆë‹¤. ì´ ë¬¸ì œì— ëŒ€í•œ ì í™”ì‹ì„ ì„¸ì›Œë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

$DP[i]$ : $i$ë²ˆì§¸ ë‚ ê¹Œì§€ ì§„í–‰í–ˆì„ ë•Œ, ì–»ì„ ìˆ˜ ìˆëŠ” ìµœëŒ€ ì´ìµ\
$DP[i] = max_{0 \le lo \lt i}(DP[lo] + max(prices[i] - prices[lo], 0))$

ì´ë ‡ê²Œ ì²˜ìŒë¶€í„° ì§„í–‰í•˜ë©´ì„œ ëª¨ë“  ë‚ ì— ëŒ€í•œ ìµœëŒ€ ì´ìµì„ êµ¬í•´ê°€ë©´ ìµœì¢…ì ìœ¼ë¡œ ë§ˆì§€ë§‰ ë‚ ì— ì–»ì„ ìˆ˜ ìˆëŠ” ìµœëŒ€ ì´ìµì„ ê³„ì‚°í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

ë‘ ë²ˆì§¸ ì ‘ê·¼ì— ëŒ€í•œ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```cpp
class Solution {
public:
    int maxProfit(vector<int>& prices) {
        if (prices.size() == 0) return 0;
        vector<int> dp(prices.size(), 0);
        for (int hi = 1; hi < prices.size(); ++hi) {
            for (int lo = 0; lo < hi; ++lo) {
                int profit = max(prices[hi] - prices[lo], 0);
                dp[hi] = max(dp[hi], dp[lo] + profit);
            }
        }
        return dp[prices.size() - 1];
    }
};
```

ì´ ì½”ë“œì˜ ì‹œê°„ ë³µì¡ë„ëŠ” $O(N^2)$ì´ê³ , ê³µê°„ ë³µì¡ë„ëŠ” $O(N)$ì…ë‹ˆë‹¤. ì‹œê°„ ë³µì¡ë„ê°€ $O(N^2)$ì¸ ì´ìœ ëŠ” 2ì¤‘ forë¬¸ì„ ëŒê¸° ë•Œë¬¸ì´ê³ , ê³µê°„ ë³µì¡ë„ê°€ $O(N)$ì¸ ì´ìœ ëŠ” DP ë°°ì—´ì„ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

---

### ì„¸ ë²ˆì§¸ ì ‘ê·¼ : ê·¹ì  ì°¾ê¸°

ë‘ ë²ˆì§¸ ì ‘ê·¼ì´ ì²« ë²ˆì§¸ ì ‘ê·¼ì— ë¹„í•´ ì‹œê°„ ë³µì¡ë„ë¥¼ í™• ì¤„ì˜€ê¸°ëŠ” í•˜ì§€ë§Œ ë¬¸ì œì˜ ì¡°ê±´ì€ $N$ì´ $30,000$ì´ë¯€ë¡œ ì—¬ì „íˆ `ì‹œê°„ ì´ˆê³¼`ì˜ ìœ„í—˜ì„ í”¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë” ì‘ì€ ì‹œê°„ ë³µì¡ë„ì˜ í’€ì´ë¥¼ ìƒê°í•´ì•¼ í•©ë‹ˆë‹¤.

ë¬¸ì œì— ëŒ€í•´ì„œ ì˜ ìƒê°í•´ë³´ë©´ **ìµœëŒ€ ì´ìµ**ì„ ì–»ëŠ”ë‹¤ëŠ” ê²ƒì€ **ê°€ê²©ì´ ì˜¬ë¼ê°€ë ¤ê³  í•˜ê¸° ì§ì „ì— ì£¼ì‹ì„ ìƒ€ë‹¤ê°€, ë–¨ì–´ì§€ê¸° ì§ì „ì— ì£¼ì‹ì„ íŒ”ë©´ ë©ë‹ˆë‹¤**. ì¦‰, ìˆ˜í•™ì ìœ¼ë¡œëŠ” `ê·¹ì†Ÿê°’`ì—ì„œ ì£¼ì‹ì„ ì‚¬ê³ , `ê·¹ëŒ“ê°’`ì—ì„œ ì£¼ì‹ì„ íŒ”ë©´ ë©ë‹ˆë‹¤. ì´ë•Œ, ê·¹ì†Ÿê°’ì€ ìì‹ ì˜ ë‹¤ìŒ ê°’ì´ ìì‹ ë³´ë‹¤ í° ì ì´ê³ , ê·¹ëŒ“ê°’ì€ ìì‹ ì˜ ë‹¤ìŒ ê°’ì´ ìì‹ ë³´ë‹¤ ì‘ì€ ì ì…ë‹ˆë‹¤.

ì„¸ ë²ˆì§¸ ì ‘ê·¼ì— ëŒ€í•œ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```cpp
class Solution {
public:
    int maxProfit(vector<int>& prices) {
        int max_profit = 0;
        int pos = 0;
        while (pos + 1 < prices.size()) {
            while (pos + 1 < prices.size() && prices[pos] >= prices[pos + 1]) pos++;
            int lo = prices[pos];
            while (pos + 1 < prices.size() && prices[pos] <= prices[pos + 1]) pos++;
            int hi = prices[pos];
            max_profit += hi - lo;
        }
        return max_profit;
    }
};
```

ì´ ì½”ë“œì˜ ì‹œê°„ ë³µì¡ë„ëŠ” $O(N)$ì´ê³ , ê³µê°„ ë³µì¡ë„ëŠ” $O(1)$ì…ë‹ˆë‹¤. ì‹œê°„ ë³µì¡ë„ê°€ $O(N)$ì¸ ì´ìœ ëŠ” `prices`ë¥¼ ì²˜ìŒë¶€í„° ëê¹Œì§€ í•œ ë²ˆë§Œ í™•ì¸í•˜ì˜€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

---

### ë„¤ ë²ˆì§¸ ì ‘ê·¼ : íƒìš•ë²• (Greedy) - ì „ ë‚ ë³´ë‹¤ ë¹„ì‹¸ë©´ íŒ”ê¸°

ì„¸ ë²ˆì§¸ ì ‘ê·¼ì—ì„œ ì²« ë²ˆì§¸, ë‘ ë²ˆì§¸ ì ‘ê·¼ë³´ë‹¤ í™•ì‹¤í•˜ê²Œ ë¹ ë¥¸ ì•Œê³ ë¦¬ì¦˜ì„ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì˜ ìƒê°í•´ë³´ë©´ êµ³ì´ `ê·¹ì†Ÿê°’`, `ê·¹ëŒ“ê°’`ì„ ì°¾ì„ í•„ìš”ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤. ê·¹ê°’ì„ ì°¾ê¸° ìœ„í•´ì„œ ë°˜ë³µë¬¸ì„ ì—¬ëŸ¬ê°œ ì‘ì„±í•´ì•¼ í•˜ê³ , í—·ê°ˆë¦¬ê¸°ë§Œ í•©ë‹ˆë‹¤. ì£¼ì‹ì´ë¼ëŠ”ê²Œ ê°€ì¥ ìŒ€ ë•Œ ì‚¬ê³ , ê°€ì¥ ë¹„ìŒ€ ë•Œ íŒŒëŠ” ê²ƒë„ ìµœëŒ€ ì´ìµì„ ì–»ì„ ìˆ˜ ìˆì§€ë§Œ, ê·¸ëƒ¥ ì£¼ì‹ì„ ì‚¬ê³ , ê°€ê²©ì´ ì˜¤ë¥´ìë§ˆì íŒŒëŠ” í–‰ìœ„ë¥¼ ê³„ì† ë°˜ë³µí•´ë„ ê°™ì€ ì´ìµì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

>í˜„ì‹¤ì€ ê°€ê²©ì´ ì—°ì†ì ìœ¼ë¡œ ë³€í•˜ê¸° ë•Œë¬¸ì— ê°€ì¥ ìŒ€ ë•Œ ì‚¬ê³ , ê°€ì¥ ë¹„ìŒ€ ë•Œ íŒŒëŠ” ê²ƒì´ ë” í° ì´ìµì´ê¸´ í•˜ì£ ..

ë„¤ ë²ˆì§¸ ì ‘ê·¼ì— ëŒ€í•œ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```cpp
class Solution {
public:
    int maxProfit(vector<int>& prices) {
        int max_profit = 0;
        for (int i = 1; i < prices.size(); ++i)
            if (prices[i] > prices[i - 1])
                max_profit += prices[i] - prices[i - 1];
        return max_profit;
    }
};
```

ì´ ì½”ë“œì˜ ì‹œê°„ ë³µì¡ë„ ì—­ì‹œ $O(N)$ì´ê³ , ê³µê°„ ë³µì¡ë„ëŠ” $O(1)$ì…ë‹ˆë‹¤.

---

ì§€ê¸ˆê¹Œì§€ **30 Day LeetCoding Challenge**ì˜ ë‹¤ì„¯ ë²ˆì§¸ ë¬¸ì œì¸ **Best Time to Buy and Sell Stock II**ì— ëŒ€í•œ ë‚´ìš©ì´ì—ˆìŠµë‹ˆë‹¤.

í˜¹ì‹œë¼ë„ ë¶€ì¡±í•œ ë¶€ë¶„ì´ ë³´ì´ì‹œë©´ ì–¸ì œë“ ì§€ **í”¼ë“œë°±**ì„ í•´ì£¼ì„¸ìš”!

ê°ì‚¬í•©ë‹ˆë‹¤. ğŸ™‡ğŸ»â€
